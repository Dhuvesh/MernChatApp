server {
    listen 80;

    location / {
        root /usr/share/nginx/html;
        index index.html;
        try_files $uri /index.html;
    }

    location /api {
        proxy_pass http://backend:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /socket.io/ {
        proxy_pass http://backend:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }
}

Save.

âœ… Now Update docker-compose.yml

Replace everything with:

services:
  backend:
    build: ./server
    env_file:
      - ./server/.env
    restart: unless-stopped
    expose:
      - "3000"

  nginx:
    build: ./client
    container_name: nginx
    restart: unless-stopped
    ports:
      - "80:80"
    depends_on:
      - backend

Notice:

âŒ No frontend service
âŒ No port 5173
âŒ No port 3000

âœ… Rebuild Everything
docker compose down
docker compose build --no-cache
docker compose up -d
âœ… Check Ports
docker ps

You should see ONLY:

0.0.0.0:80->80/tcp
ðŸŽ¯ What This Does

â€¢ Builds Vite
â€¢ Converts it into static files
â€¢ Nginx serves static files
â€¢ Nginx proxies API + socket
â€¢ Single origin
â€¢ Cookies work
â€¢ WebSocket works
â€¢ No Vite errors

You just moved from dev setup â†’ proper deployment setup ðŸ”¥

Run this and tell me what docker ps shows.
